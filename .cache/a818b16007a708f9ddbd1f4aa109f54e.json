{"dependencies":[{"name":"/Users/davidbastian/Sites/ar/package.json","includedInParent":true,"mtime":1519875653000},{"name":"/Users/davidbastian/Sites/ar/.babelrc","includedInParent":true,"mtime":1519853599000},{"name":"/Users/davidbastian/Sites/ar/node_modules/posthtml-expressions/package.json","includedInParent":true,"mtime":1519865198000},{"name":"vm","loc":{"line":3,"column":19}},{"name":"./tags","loc":{"line":5,"column":27}},{"name":"./loops","loc":{"line":6,"column":35}},{"name":"./escape","loc":{"line":7,"column":35}},{"name":"./backup","loc":{"line":9,"column":37}},{"name":"./placeholders","loc":{"line":10,"column":29}}],"generated":{"js":"\"use strict\";var t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t};const e=require(\"vm\"),r=require(\"./tags\"),o=require(\"./loops\"),n=require(\"./escape\"),s=require(\"./backup\").make,a=require(\"./backup\").revert,i=require(\"./placeholders\");let c,l,u,p,f=[];function g(t,e,r,o,n){const s=o;return s[t[0]]=e,t[1]&&(s[t[1]]=r),y({locals:s},JSON.parse(n))}function h(t,e,r){return y({locals:t=Object.assign(e,t)},r.content)}function y(n,m){const d=e.createContext(n.locals);let w;return m.reduce((b,x,v)=>{if(w)return w--,b;if(\"string\"==typeof x)return x=i(x,d,f),b.push(x),b;if(x.attrs)for(let t in x.attrs)x.attrs[t]=i(x.attrs[t],d,f);if(x.content&&x.tag!==u[0]&&x.tag!==p[0]&&(x.content=y(n,x.content)),x.tag===c[0]){if(!x.attrs||!x.attrs.condition)throw new Error('the \"'+c[0]+'\" tag must have a \"condition\" attribute');let t=1,o=\"if (\"+x.attrs.condition+\") { 0 } \";const s=[x.content];let a=r(m,++v),i=a[0],l=a[1];for(;c.slice(1).indexOf(l.tag)>-1;){let e=l.tag,n=\"\";if(l.tag===c[2]&&(e=\"else\"),l.tag===c[1]){if(!l.attrs||!l.attrs.condition)throw new Error('the \"'+c[1]+'\" tag must have a \"condition\" attribute');n=l.attrs.condition,e=\"else if\"}s.push(l.content),o+=e+(n?\" (\"+n+\")\":\"\")+\" { \"+t+++\" } \",a=r(m,++i),i=a[0],l=a[1]}const u=s[e.runInContext(o,d)];return w=i-v,u&&Array.prototype.push.apply(b,y(n,u)),b}if(x.tag===l[0]){if(!x.attrs||!x.attrs.expression)throw new Error('the \"'+l[0]+'\" tag must have a \"expression\" attribute');let t=0,r=\"switch(\"+x.attrs.expression+\") {\";const o=[];for(let e=0;e<x.content.length;e++){const n=x.content[e];if(\"string\"!=typeof n){if(n.tag===l[1]){if(!n.attrs||!n.attrs.n)throw new Error('the \"'+l[1]+'\" tag must have a \"n\" attribute');r+=\"case \"+n.attrs.n+\": {\"+t+++\"}; break; \"}else{if(n.tag!==l[2])throw new Error('the \"'+l[0]+'\" tag can contain only \"'+l[1]+'\" tags and one \"'+l[2]+'\" tag');r+=\"default: {\"+t+++\"}\"}o.push(n)}}r+=\"}\";const s=o[e.runInContext(r,d)];return Array.prototype.push.apply(b,y(n,s.content)),b}if(x.tag===u[0]){if(!x.attrs||!x.attrs.loop)throw new Error('the \"'+u[0]+'\" tag must have a \"loop\" attribute');const r=o(x.attrs.loop),i=e.runInContext(r.expression,d);if(\"object\"!==(void 0===i?\"undefined\":t(i)))throw new Error(\"You must provide an array or object to loop through\");if(r.keys.length<1||\"\"===r.keys[0])throw new Error(\"You must provide at least one loop argument\");const c=JSON.stringify(x.content),l=r.keys,p=s(l,n.locals);if(Array.isArray(i))for(let t=0;t<i.length;t++)b.push(g(l,i[t],t,n.locals,c));else for(let t in i)b.push(g(l,i[t],t,n.locals,c));return n.locals=a(l,n.locals,p),b}if(x.tag===p[0]){if(!x.attrs||!x.attrs.with)throw new Error('the \"'+p[0]+'\" tag must have a \"with\" attribute');const r=e.runInContext(x.attrs.with,d);if(\"object\"!==(void 0===r?\"undefined\":t(r))||Array.isArray(r))throw new Error(\"You must provide an object to make scope\");const o=Object.keys(r),i=s(o,n.locals);return b.push(h(r,n.locals,x)),n.locals=a(o,n.locals,i),b}return b.push(x),b},[])}module.exports=function(t){t=Object.assign({locals:{},delimiters:[\"{{\",\"}}\"],unescapeDelimiters:[\"{{{\",\"}}}\"],conditionalTags:[\"if\",\"elseif\",\"else\"],switchTags:[\"switch\",\"case\",\"default\"],loopTags:[\"each\"],scopeTags:[\"scope\"]},t),u=t.loopTags,p=t.scopeTags,c=t.conditionalTags,l=t.switchTags;let e=n(t.delimiters[0]),r=n(t.delimiters[1]);const o=new RegExp(e+\"(.+?)\"+r,\"g\");e=n(t.unescapeDelimiters[0]),r=n(t.unescapeDelimiters[1]);const s=new RegExp(e+\"(.+?)\"+r,\"g\"),a=[{text:t.delimiters,regexp:o,escape:!0},{text:t.unescapeDelimiters,regexp:s,escape:!1}];return t.delimiters.join().length>t.unescapeDelimiters.join().length?(f[0]=a[0],f[1]=a[1]):(f[0]=a[1],f[1]=a[0]),y.bind(null,{locals:t.locals})};"},"hash":"465108a823afac4d66e956effd8aca62","cacheData":{"env":{}}}